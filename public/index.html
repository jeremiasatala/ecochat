<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>EcoChat</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="layout">

    <!-- Sidebar izquierda: auth (visible cuando no logueado) y perfil -->
    <aside class="sidebar-left sidebar">
      <div class="logo">
        <img src="assets/logo.png" alt="EcoChat" class="logo-img">
        <h2>EcoChat</h2>
      </div>

      <!-- AUTH (mostrar por defecto) -->
      <div id="auth">
        <h3>Registrarse</h3>
        <div class="input-group">
          <input id="registerUsername" type="text" placeholder=" " class="modern-input">
          <label for="registerUsername">Nombre de usuario</label>
        </div>
        <div class="input-group">
          <input id="registerEmail" type="email" placeholder=" " class="modern-input">
          <label for="registerEmail">Email</label>
        </div>
        <div class="input-group">
          <input id="registerPassword" type="password" placeholder=" " class="modern-input">
          <label for="registerPassword">Contraseña</label>
        </div>
        <button id="registerBtn" class="modern-btn primary">Crear cuenta</button>

        <div class="divider">
          <span>o</span>
        </div>

        <h3>Iniciar sesión</h3>
        <div class="input-group">
          <input id="loginEmail" type="email" placeholder=" " class="modern-input">
          <label for="loginEmail">Email</label>
        </div>
        <div class="input-group">
          <input id="loginPassword" type="password" placeholder=" " class="modern-input">
          <label for="loginPassword">Contraseña</label>
        </div>
        <button id="loginBtn" class="modern-btn secondary">Ingresar</button>
      </div>

      <!-- Perfil (oculto hasta login) -->
      <div id="profile" class="hidden">
        <div id="profile-card">
          <div class="cover-photo">
            <img id="coverPreview" src="assets/default-cover.png" alt="Portada">
          </div>

          <div class="avatar-container">
            <img id="avatarPreview" src="assets/default-avatar.png" alt="Avatar">
          </div>

          <div class="profile-info">
            <h3 id="usernameDisplay">Invitado</h3>
            <p id="bio">Bienvenido a EcoChat</p>
            <p class="stats">Mensajes enviados: <span id="messageCount">0</span></p>
            <button id="editProfileBtn" class="modern-btn outline">Editar Perfil</button>
          </div>
        </div>

        <div class="divider">
          <span>Editar información</span>
        </div>

        <div class="input-group">
          <input id="editUsername" type="text" placeholder=" " class="modern-input">
          <label for="editUsername">Nombre de usuario</label>
        </div>

        <div class="file-upload-group">
          <label>Avatar</label>
          <div class="file-input-container">
            <input id="avatar" type="file" accept="image/*" class="file-input">
            <label for="avatar" class="file-input-label">
              <span class="file-input-text">Seleccionar imagen</span>
              <span class="file-input-button">Examinar</span>
            </label>
            <button id="subir-avatar" class="modern-btn small">Subir</button>
          </div>
        </div>

        <div class="file-upload-group">
          <label>Foto de portada</label>
          <div class="file-input-container">
            <input id="cover" type="file" accept="image/*" class="file-input">
            <label for="cover" class="file-input-label">
              <span class="file-input-text">Seleccionar imagen</span>
              <span class="file-input-button">Examinar</span>
            </label>
            <button id="subir-cover" class="modern-btn small">Subir</button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Chat central -->
    <main class="chat-panel">
      <div id="chat"></div>
      
      <div class="comment-form">
        <textarea id="mensaje" style="border-radius:30px" maxlength="200" placeholder="Escribe un mensaje..."></textarea>
        <div class="comment-footer">
          <span id="charCount">0/200</span>
          <button id="enviar" class="send-btn">➤</button>
        </div>
      </div>
    </main>

    <!-- Sidebar derecha: lista de usuarios e inspector -->
    <aside class="sidebar-right sidebar">
      <div class="tabs">
        <button class="tab-btn active" data-tab="users">Usuarios</button>
        <button class="tab-btn" data-tab="profile">Perfil</button>
      </div>

      <!-- Lista de usuarios -->
      <div id="users-tab" class="tab-content active">
        <h3>Usuarios conectados</h3>
        <ul id="userList"></ul>
      </div>

      <!-- Inspector de perfil -->
      <div id="profile-tab" class="tab-content">
        <div id="profile-inspector">
          <div class="inspector-header">
            <h3>Perfil de <span id="inspector-username">Usuario</span></h3>
            <button id="close-inspector" class="close-btn">×</button>
          </div>
          
          <div class="inspector-cover">
            <img id="inspector-cover" src="assets/default-cover.png" alt="Portada">
          </div>
          
          <div class="inspector-avatar">
            <img id="inspector-avatar" src="assets/default-avatar.png" alt="Avatar">
          </div>
          
          <div class="inspector-info">
            <p><strong>Email:</strong> <span id="inspector-email">email@ejemplo.com</span></p>
            <p><strong>Mensajes enviados:</strong> <span id="inspector-messages">0</span></p>
            <p><strong>Última conexión:</strong> <span id="inspector-lastseen">Ahora</span></p>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>
</html>