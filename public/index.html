<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>EcoChat</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="layout">

    <!-- Sidebar izquierda: auth (visible cuando no logueado) y perfil -->
    <aside class="sidebar-left sidebar">
      <div class="logo">
        <img src="assets/logo.png" alt="EcoChat" class="logo-img" style="width:40px;height:40px">
        <h2>EcoChat</h2>
      </div>

      <!-- AUTH (mostrar por defecto) -->
      <div id="auth">
        <h3>Registrarse</h3>
        <div class="input-group">
          <input id="registerUsername" type="text" placeholder=" " class="modern-input">
          <label for="registerUsername">Nombre de usuario</label>
        </div>
        <div class="input-group">
          <input id="registerEmail" type="email" placeholder=" " class="modern-input">
          <label for="registerEmail">Email</label>
        </div>
        <div class="input-group">
          <input id="registerPassword" type="password" placeholder=" " class="modern-input">
          <label for="registerPassword">Contraseña</label>
        </div>
        <button id="registerBtn" class="modern-btn primary">Crear cuenta</button>

        <div class="divider">
          <span>o</span>
        </div>

        <h3>Iniciar sesión</h3>
        <div class="input-group">
          <input id="loginEmail" type="email" placeholder=" " class="modern-input">
          <label for="loginEmail">Email</label>
        </div>
        <div class="input-group">
          <input id="loginPassword" type="password" placeholder=" " class="modern-input">
          <label for="loginPassword">Contraseña</label>
        </div>
        <button id="loginBtn" class="modern-btn secondary">Ingresar</button>
      </div>

      <!-- Perfil (oculto hasta login) -->
      <div id="profile" class="hidden profile-form" style="margin-top:12px;">
        <div id="profile-card">
          <div class="cover-photo">
            <img id="coverPreview" src="assets/default-cover.png" alt="Portada" style="width:100%;height:80px;object-fit:cover;border-radius:8px 8px 0 0">
          </div>

          <div class="avatar-container" style="margin-top:-30px;text-align:center;">
            <img id="avatarPreview" src="assets/default-avatar.png" alt="Avatar" style="width:70px;height:70px;border-radius:50%;border:3px solid #fff;object-fit:cover;background:#fff">
          </div>

          <div class="profile-info">
            <h3 id="usernameDisplay">Invitado</h3>
            <p id="bio">Bienvenido a EcoChat</p>
            <p class="stats">Mensajes enviados: <span id="messageCount">0</span></p>
            <button id="editProfileBtn" class="modern-btn outline">Editar Perfil</button>
          </div>
        </div>

        <div class="divider">
          <span>Editar información</span>
        </div>

        <div class="input-group">
          <input id="editUsername" type="text" placeholder=" " class="modern-input">
          <label for="editUsername">Nombre de usuario</label>
        </div>

        <div class="file-upload-group">
          <label>Avatar</label>
          <div class="file-input-container">
            <input id="avatar" type="file" accept="image/*" class="file-input">
            <label for="avatar" class="file-input-label">
              <span class="file-input-text">Seleccionar imagen</span>
              <span class="file-input-button">Examinar</span>
            </label>
            <button id="subir-avatar" class="modern-btn small">Subir</button>
          </div>
        </div>

        <div class="file-upload-group">
          <label>Foto de portada</label>
          <div class="file-input-container">
            <input id="cover" type="file" accept="image/*" class="file-input">
            <label for="cover" class="file-input-label">
              <span class="file-input-text">Seleccionar imagen</span>
              <span class="file-input-button">Examinar</span>
            </label>
            <button id="subir-cover" class="modern-btn small">Subir</button>
          </div>
        </div>
      </div>

    </aside>

    <!-- Chat central -->
    <main class="chat-panel" id="chatContainer" style="display:flex; flex-direction:column;">
      <div id="chat" style="flex:1; padding:10px; background:#f9f9f9; border-radius:8px; overflow-y:auto;"></div>

      <div class="comment-form" style="margin-top:10px; display:flex; flex-direction:column;">
        <textarea id="mensaje" maxlength="200" placeholder="Escribe un mensaje..." style="resize:none; padding:10px; border-radius:8px; border:1px solid #ddd; height:60px;"></textarea>
        <div style="display:flex; justify-content:space-between; align-items:center; margin-top:6px;">
          <span id="charCount">0/200</span>
          <button id="enviar" class="send-btn" style="background:#007bff;color:#fff;border:none;border-radius:50%;width:40px;height:40px;cursor:pointer;">➤</button>
        </div>
      </div>
    </main>

    <!-- Sidebar derecha: lista de usuarios -->
    <aside class="sidebar-right sidebar">
      <h3>Usuarios</h3>
      <ul id="userList" style="list-style:none; padding:0; margin-top:8px;"></ul>
    </aside>

  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>
</html>